<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Supabase OTP Auth</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <main class="container">

    <!-- 1 ▸ email / username -->
    <section id="step-check" class="panel active" aria-labelledby="check-title">
      <article class="card">
        <h2 id="check-title">Welcome</h2>

        <form id="form-check" autocomplete="off">
          <input id="input-id" type="text" placeholder="Email or username" required>
          <button class="btn primary" type="submit">Continue</button>
        </form>

        <p id="err-check" class="error" role="alert"></p>
      </article>
    </section>

    <!-- 2 ▸ login -->
    <section id="step-login" class="panel" aria-labelledby="login-title">
      <article class="card">
        <h2 id="login-title">Sign in</h2>

        <p id="login-label" class="hint"></p>

        <form id="form-login" autocomplete="current-password">
          <input id="login-pass" type="password" placeholder="Password" required minlength="6">
          <button class="btn primary" type="submit">Login</button>
        </form>

        <p id="err-login" class="error" role="alert"></p>
        <button class="btn link" id="back-login">← Back</button>
      </article>
    </section>

    <!-- 3 ▸ signup -->
    <section id="step-signup" class="panel" aria-labelledby="signup-title">
      <article class="card">
        <h2 id="signup-title">Create account</h2>

        <p id="signup-label" class="hint"></p>

        <form id="form-signup" autocomplete="new-password">
          <input id="su-user"  type="text"      placeholder="Username"        required>
          <input id="su-pass"  type="password"  placeholder="Password (≥6)"  minlength="6" required>
          <input id="su-pass2" type="password"  placeholder="Confirm password" minlength="6" required>
          <button class="btn primary" type="submit">Register</button>
        </form>

        <p id="err-signup" class="error" role="alert"></p>
        <button class="btn link" id="back-signup">← Back</button>
      </article>
    </section>

    <!-- 4 ▸ OTP -->
    <section id="step-otp" class="panel" aria-labelledby="otp-title">
      <article class="card">
        <h2 id="otp-title">Email verification</h2>

        <p>A code was sent to <span id="otp-mail"></span></p>

        <form id="form-otp">
          <input id="otp-code" type="text" inputmode="numeric" maxlength="6" placeholder="6-digit code" required>
          <button class="btn primary" type="submit">Verify</button>
        </form>

        <p id="err-otp" class="error" role="alert"></p>
        <button class="btn link" id="otp-resend">Resend code</button>
      </article>
    </section>

    <!-- 5 ▸ dashboard -->
    <section id="step-home" class="panel" aria-labelledby="home-title">
      <article class="card">
        <h2 id="home-title">Dashboard</h2>

        <div class="user-box">
          <p><b>Email:</b> <span id="u-mail"></span></p>
          <p><b>Username:</b> <span id="u-name"></span></p>
          <p><b>Member since:</b> <span id="u-date"></span></p>
        </div>

        <button class="btn secondary" id="logout">Sign out</button>
      </article>
    </section>

  </main>

  <!-- libs -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.3/dist/umd/supabase.min.js"></script>
  <script src="config.js"></script>
  <script src="app.js"></script>
</body>
</html>
